{% extends 'base.html' %}

{% block content %}
    <style>
        .card {
            background-color: #1c1c1c;
            color: #e0e0e0;
            border: none;
            border-radius: 10px;
            margin-bottom: 2rem;
        }

        .card-title {
            color: #bb86fc;
        }

        .btn-primary {
            background-color: #bb86fc !important;
            border-color: #bb86fc !important;
        }

        .btn-primary:hover {
            background-color: #9a67ea !important;
            border-color: #9a67ea !important;
        }
    </style>
    <div class="card p-4">
        <h3 class="card-title text-center">Dark Souls III: Souls Calculator</h3>
        <form id="souls-form">
            <div class="form-group">
                <label for="current-level">Current Level</label>
                <input type="number" class="form-control" id="current-level" required>
            </div>
            <div class="form-group">
                <label for="desired-level">Desired Level</label>
                <input type="number" class="form-control" id="desired-level" required>
            </div>
            <button type="submit" class="btn btn-primary btn-block">Calculate</button>
        </form>
        <div id="result" class="mt-3"></div>
    </div>


<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js"></script>
<script>
    $('#souls-form').on('submit', function (e) {
        e.preventDefault();
        const currentLevel = $('#current-level').val();
        const desiredLevel = $('#desired-level').val();
        $.ajax({
            url: '/calculator/calculate_souls/',
            data: {current_level: currentLevel, desired_level: desiredLevel},
            success: function (data) {
                $('#result').html(`<h4>Souls needed: ${data.souls_needed.toLocaleString()}</h4>`);
            }
        });
    });
</script>
{% endblock %}
